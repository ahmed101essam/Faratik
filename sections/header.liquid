{% assign colors = 'bg-[#cd0102],bg-[#f2bb06],bg-[#ff7e06],bg-[#400afe],bg-[#400afe]' | split: ',' %}
<header class="fixed top-0 left-0 z-20 w-full bg-[#fde9d07e] backdrop-blur-sm">
  <div class="max-w-6xl mx-auto flex items-center justify-between py-3 px-6 md:px-0">
    <ul class="items-center gap-2 flex-row-reverse hidden md:flex">
      {% for link in linklists['main-menu'].links %}
        {% assign idx = forloop.index0 | modulo: colors.size %}
        {% assign color = colors[idx] %}

        <li class="block mr-6 btn-cartoon {{ color }} py-1 rounded w-36 border text-center border-black text-white text-xl font-medium">
          <a
            href="{{ link.url }}"
            class="text-2xl outlined-text font-bold text-white text-center font-[bangers] hover:text-gray-900"
          >
            {{ link.title }}
          </a>
        </li>
      {% endfor %}
      <li class="relative block mr-6 btn-cartoon bg-[#fde9d0] py-1 rounded w-36 border text-center border-black text-white text-xl font-medium">
        <a
          href="{{ routes.cart_url }}"
          class="text-2xl outlined-text font-bold text-white text-center font-[bangers] hover:text-gray-900"
        >
          Cart <i class="fa-solid fa-basket-shopping"></i>
          <span class="bg-[#cd0102] w-8 h-8 absolute -top-3 right-0 rounded-full z-10">
            {{- cart.item_count -}}
          </span>
        </a>
      </li>
    </ul>
    <div>
      <button data-mobile-menu-button class="bg-white p-1 btn-cartoon md:hidden">
        <i class="fa-solid fa-bars text-2xl font-bold"></i>
      </button>
    </div>
    <div>
      <a href="{{ routes.root_url }}">
        <img
          src="{{ shop.brand.logo | img_url: 'medium' }}"
          alt="{{ shop.name }}"
          class="w-28"
          width=""
          height=""
        >
      </a>
    </div>
  </div>
  <div
    data-mobile-menu
    class="md:hidden fixed w-11/12 z-30 h-screen left-0 top-0 btn-cartoon bg-[#fde9d0] p-3 transform transition-transform duration-500 ease-in-out"
    style="transform: translateX(-105%);"
  >
    <div class="py-2 border-b-2 border-black flex justify-between items-center">
      <h3 class="font-[bangers] text-3xl">Menu</h3>
      <button class="font-[bangers] text-xl bg-white btn-cartoon cursor-pointer p-1">
        <i
          data-mobile-menu-close-button
          class="fa-solid fa-xmark"
        ></i>
      </button>
    </div>
    <ul class="p-2 flex flex-col gap-4 font-[bangers] mt-3">
      {% for link in linklists['main-menu'].links %}
        {% assign idx = forloop.index0 | modulo: colors.size %}
        {% assign color = colors[idx] %}
        <li class="{{ color }} btn-cartoon outlined-text text-2xl py-1 px-4">
          <a href="{{ link.url }}">{{ link.title }}</a>
        </li>
      {% endfor %}
      <li class="bg-[#fde9d0] btn-cartoon outlined-text text-2xl py-1 px-4 flex justify-between">
        <div>
          <a href="{{ routes.cart_url }}">Cart <i class="fa-solid fa-basket-shopping"></i></a>
        </div>
        <span class="bg-[#cd0102] w-8 h-8 rounded-full text-center">
          {{- cart.item_count -}}
        </span>
      </li>
    </ul>
  </div>
</header>

<script>
  window.addEventListener('DOMContentLoaded', () => {
    const mobileButton = document.querySelector('[data-mobile-menu-button]');
    const mobileMenu = document.querySelector('[data-mobile-menu]');
    const mobileMenuCloseButton = document.querySelector('[data-mobile-menu-close-button]');

    mobileButton.addEventListener('click', (e) => {
      e.stopPropagation();
      mobileMenu.style.transform = 'translateX(0)';
    });

    mobileMenuCloseButton.addEventListener('click', (e) => {
      e.stopPropagation();
      mobileMenu.style.transform = 'translateX(-105%)';
    });

    document.addEventListener('click', (e) => {
      if (!mobileMenu.contains(e.target) && !mobileButton.contains(e.target)) {
        mobileMenu.style.transform = 'translateX(-105%)';
      }
    });
  });
</script>
